import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';
import { Language } from './types';

const translations = {
  ar: {
    discoverPleasureOfLearning: "اكتشف متعة التعلم",
    back: "رجوع",
    logout: "خروج",
    comingSoonTitle: "قريبا...",
    comingSoonMessage: "هذه الميزة قيد التطوير حاليًا. ترقبوا التحديثات!",
    notifications: "الإشعارات",
    noNewNotifications: "لا توجد إشعارات جديدة.",
    notificationMessage: "تمت إضافة ملاحظة جديدة من الأستاذ في مادة {subject}.",
    notificationNewSummary: "تمت إضافة ملخص جديد في مادة {subject}.",
    notificationNewExercise: "تمت إضافة تمارين جديدة في مادة {subject}.",
    notificationNewExamProgram: "تمت إضافة برنامج فروض جديد في مادة {subject}.",
    unifiedLoginWelcome: "مرحبا بك في تطبيق امتياز",
    unifiedLoginPrompt: "الرجاء إدخال رمز الدخول الخاص بك",
    loginCodePlaceholder: "رمز الدخول",
    login: "الدخول",
    requestHelp: "طلب مساعدة",
    helpNote: "ملاحظة: عند الضغط على طلب مساعدة ستتحول تلقائيا إلى الإتصال برقم هاتفي.",
    invalidCode: "الرمز المدخل غير صحيح. الرجاء المحاولة مرة أخرى أو طلب المساعدة.",
    superAdminDashboardTitle: "لوحة تحكم المدير الخارق",
    addSchoolSectionTitle: "إضافة مدرسة جديدة",
    newSchoolNamePlaceholder: "اسم المدرسة الجديدة",
    principalSecretCodePlaceholder: "الرمز السري الخاص بالمدير",
    addSchool: "إضافة المدرسة",
    enterSchoolNameAndCode: "الرجاء إدخال اسم المدرسة ورمز المدير.",
    currentSchools: "المدارس الحالية",
    principalCodeLabel: "رمز المدير",
    delete: "حذف",
    confirmDeleteSchool: "هل أنت متأكد من رغبتك في حذف مدرسة \"{schoolName}\"؟ سيتم حذف جميع بياناتها بشكل دائم.",
    noSchoolsAdded: "لا توجد مدارس مضافة بعد.",
    principalDashboardTitle: "لوحة تحكم المدير(ة)",
    principalWelcome: "أهلاً بك. اختر الإجراء المطلوب.",
    manageTeachers: "إدارة الأساتذة",
    manageStudents: "إدارة التلاميذ",
    announcements: "الإعلانات",
    exercises: "تمارين أسبوعية",
    summaries: "الملخصات",
    complaintsAndSuggestions: "عرض الاقتراحات والشكاوى",
    educationalTips: "نصائح تربوية",
    performanceTracking: "تتبع أداء التلاميذ",
    reviewNotes: "مراجعة الملاحظات",
    guardianDashboardTitle: "لوحة تحكم ولي الأمر",
    studentLevel: "المستوى",
    selectSubjectToFollow: "اختر المادة للمتابعة",
    viewAnnouncements: "عرض الإعلانات",
    viewEducationalTips: "عرض النصائح التربوية",
    submitComplaintOrSuggestion: "تقديم شكوى أو اقتراح",
    teacherDashboardTitle: "لوحة تحكم الأستاذ(ة)",
    teacherSelectLevelAndSubject: "الرجاء تحديد المستوى والمادة",
    level: "المستوى",
    subject: "المادة",
    next: "التالي",
    add: 'إضافة',
    teacherName: 'اسم الأستاذ(ة)',
    loginCode: 'رمز الدخول',
    levels: 'المستويات',
    classes: 'الأفواج',
    addTeacher: 'إضافة أستاذ',
    existingTeachers: 'الأساتذة الحاليون',
    confirmDeleteTeacher: 'هل أنت متأكد من حذف الأستاذ {name}؟',
    noTeachers: 'لا يوجد أساتذة حاليا.',
    edit: 'تعديل',
    updateTeacher: 'تحديث البيانات',
    announcementContent: 'محتوى الإعلان',
    attachFile: 'إرفاق ملف (صورة أو PDF)',
    targetAudience: 'إرسال إلى',
    guardians: 'أولياء الأمور',
    teachers: 'الأساتذة',
    sendAnnouncement: 'إرسال الإعلان',
    sentAnnouncements: 'الإعلانات المرسلة',
    complaintContent: 'محتوى الشكوى / الاقتراح',
    submit: 'إرسال',
    receivedComplaints: 'الشكاوى والاقتراحات المستلمة',
    fromGuardianOf: 'من ولي أمر التلميذ(ة)',
    educationalTipContent: 'محتوى النصيحة',
    generateWithAI: 'توليد نصيحة بالذكاء الاصطناعي',
    sendTip: 'إرسال النصيحة',
    sentTips: 'النصائح المرسلة',
    performanceOverview: 'نظرة عامة على الأداء',
    averageGradePerLevel: 'متوسط المعدلات حسب المستوى',
    levelPerformance: 'أداء المستوى: {level}',
    studentName: 'اسم التلميذ',
    averageGrade: 'المعدل العام',
    performanceTrend: 'منحنى التطور',
    noComplaints: 'لا توجد شكاوى أو اقتراحات حاليا.',
    noAnnouncements: 'لا توجد إعلانات حاليا.',
    noTips: 'لا توجد نصائح حاليا.',
    confirm: 'تأكيد',
    cancel: 'إلغاء',
    fillAllFields: 'الرجاء ملء جميع الحقول.',
    guardianNotesTitle: 'الملاحظات والغيابات',
    addStudent: 'إضافة تلميذ',
    guardianCode: 'رمز ولي الأمر',
    existingStudents: 'التلاميذ الحاليون',
    confirmDeleteStudent: 'هل أنت متأكد من حذف التلميذ {name}؟',
    noStudents: 'لا يوجد تلاميذ حاليا.',
    class: 'القسم',
    statisticsDashboard: 'لوحة الإحصائيات',
    interviewRequests: 'طلبات المقابلة',
    monthlyFees: 'الواجبات الشهرية',
    schoolManagement: 'إدارة المدرسة',
    importFromExcel: 'استيراد التلاميذ من ملف اكسل',
    importInstructions: "يجب أن يحتوي الملف على عمودين: العمود الأول لأسماء التلاميذ، والعمود الثاني للرمز السري الخاص بأوليائهم.",
    selectFile: 'اختر ملف إكسل',
    import: 'استيراد',
    importSuccess: 'تم استيراد {count} تلميذ بنجاح.',
    importError: 'حدث خطأ أثناء الاستيراد. يرجى التحقق من تنسيق الملف.',
    selectLevelAndClass: 'الرجاء اختيار المستوى والقسم أولاً.',
    manageSchool: 'إدارة المدرسة',
    schoolStatus: 'حالة المدرسة',
    active: 'نشطة',
    inactive: 'متوقفة',
    maintenanceTitle: 'التطبيق في وضع الصيانة',
    maintenanceMessage: 'التطبيق يخضع حالياً للصيانة. الرجاء المحاولة مرة أخرى لاحقاً.',
    statisticsDashboard_feature: "خاصية: لوحة الإحصائيات",
    educationalTips_feature: "خاصية: نصائح تربوية",
    announcements_feature: "خاصية: الإعلانات",
    complaintsAndSuggestions_feature: "خاصية: الشكاوى والاقتراحات",
    reviewNotes_feature: "خاصية: مراجعة الملاحظات",
    monthlyFees_feature: "خاصية: الرسوم الشهرية",
    interviewRequests_feature: "خاصية: طلبات المقابلة",
    schoolManagement_feature: "خاصية: إدارة المدرسة",
    manage: "إدارة",
    featureToggleTitle: "تفعيل / تعطيل الميزات",
    browseAsTeacher: "التصفح كأستاذ",
    browseAsTeacher_feature: "خاصية: التصفح كأستاذ",
    selectLevelAndSubjectPrompt: "الرجاء اختيار المستوى، المادة والقسم",
    selectClassPrompt: "الرجاء اختيار القسم",
    sendForReview: "إرسال للمراجعة",
    sentForReviewSuccess: "تم إرسال الملاحظة للمراجعة بنجاح!",
    aiGeneratedNote: "✨ ملاحظة من الذكاء الاصطناعي",
    feeNotification: "قام التلميذ(ة) {studentName} بأداء الواجب الشهري بقيمة {amount} درهم.",
    payNow: "أداء الواجب الآن",
    paymentAmount: "المبلغ المدفوع (درهم)",
    paymentHistory: "سجل الأداء",
    paidOn: "تم الأداء بتاريخ",
    paymentSuccessful: "تم الأداء بنجاح!",
    requestInterview: "طلب مقابلة",
    confirmRequestInterview: "تأكيد طلب المقابلة",
    requestSent: "تم إرسال طلبك بنجاح.",
    paymentStatus: "حالة الأداء",
    paid: "أدى الواجب",
    notPaid: "لم يؤد الواجب",
    markAsPaid: "تغيير إلى 'أدى'",
    principalFeeManagement: "حالة أداء التلاميذ للواجب الشهري",
    noInterviewRequests: "لا توجد طلبات مقابلة حاليا.",
    requestFrom: "طلب من ولي أمر التلميذ(ة) {studentName}",
    markAsCompleted: "تمت المقابلة",
    monthlyFeePrompt: "هنا يمكنك تتبع وأداء الواجبات الشهرية للسنة الدراسية.",
    noPayments: "لا يوجد سجل أداء.",
    requestInterviewPrompt: "هل تود تأكيد طلب مقابلة مع الإدارة؟",
    payByCard: "الأداء عبر البطاقة البنكية",
    cardDetails: "معلومات البطاقة",
    cardNumber: "رقم البطاقة",
    expiryDate: "تاريخ انتهاء الصلاحية (MM/YY)",
    cvc: "رمز التحقق (CVC)",
    cardholderName: "اسم حامل البطاقة",
    confirmPayment: "تأكيد الدفع",
    processingPayment: "جاري معالجة الدفع...",
    academicYearMonths: "شهور السنة الدراسية",
    paymentDue: "واجب الأداء",
    paymentCompleted: "تم الأداء",
    pay: "أداء",
    setMonthlyFee: 'تحديد الواجب الشهري',
    monthlyFeeAmountLabel: 'قيمة الواجب الشهري (درهم)',
    transportation: 'النقل',
    monthlyFee: 'الواجب الشهري',
    totalAmount: 'المبلغ الإجمالي',
    setTransportationFee: 'تحديد رسوم النقل',
    transportationFeeAmountLabel: 'قيمة رسوم النقل (درهم)',
    
    // Features from user prompt
    supplementaryLessons: 'الدروس الداعمة والتفاعلية',
    addSupplementaryLesson: 'إضافة درس داعم',
    lessonTitle: 'عنوان الدرس/الرابط',
    externalLink: 'الرابط الخارجي (يوتيوب، موقع تعليمي... إلخ)',
    addLink: 'إضافة الرابط',
    noLessons: 'لا توجد دروس داعمة حاليا.',
    
    timetable: 'جدول التوقيت',
    addTimetable: 'إضافة جدول توقيت',
    uploadTimetable: 'تحميل جدول التوقيت (صورة أو PDF)',
    noTimetable: 'لا يوجد جدول توقيت حالي.',

    quizzes: 'اختبارات قصيرة',
    addQuiz: 'إضافة اختبار قصير',
    generateQuizFromImage: 'إنشاء اختبار من صورة',
    uploadImageForQuiz: 'ارفع صورة لملخص أو تمارين لإنشاء اختبار',
    generatingQuiz: 'جاري إنشاء الاختبار بالذكاء الاصطناعي...',
    quizGenerated: 'تم إنشاء الاختبار بنجاح! الرجاء مراجعته قبل الحفظ.',
    saveQuiz: 'حفظ الاختبار',
    noQuizzes: 'لا توجد اختبارات قصيرة حاليا.',

    unitProject: 'مشروع الوحدة',
    addProject: 'إضافة مشروع',
    projectTitle: 'عنوان المشروع',
    projectDescription: 'وصف المشروع',
    takePhoto: 'التقاط صورة',
    uploadPhoto: 'رفع صورة',
    noProjects: 'لا توجد مشاريع حاليا.',
    capture: 'التقاط',

    digitalLibrary: 'مكتبة القسم الرقمية',
    addBook: 'إضافة كتاب أو قصة',
    bookTitle: 'عنوان الكتاب',
    bookDescription: 'وصف قصير',
    uploadBook: 'تحميل الكتاب (PDF)',
    download: 'تحميل',
    noBooks: 'المكتبة فارغة حاليا.',
    
    manageFees: 'إدارة الرسوم',
    update: 'تحديث',
    feesUpdated: 'تم تحديث الرسوم بنجاح!',

    // New AI Features & Album
    lessonPlanner: 'مخطط الدروس',
    lessonTopic: 'موضوع الدرس',
    generatePlan: 'إنشاء الخطة',
    generatingPlan: 'جاري إنشاء الخطة...',
    lessonPlan: 'خطة الدرس',
    learningObjectives: 'الأهداف التعليمية',
    inClassActivities: 'أنشطة مقترحة',
    homework: 'واجبات منزلية',
    discussionQuestions: 'أسئلة للمناقشة',

    personalizedExercises: 'تمارين مخصصة',
    generateExercises: 'إنشاء تمارين مخصصة',
    selectStudentForExercises: 'اختر تلميذا لإنشاء تمارين مخصصة له',
    generatingExercises: 'جاري إنشاء التمارين...',
    supportExercises: 'تمارين دعم',
    enrichmentExercises: 'تمارين إثراء',
    saveAndSendExercises: 'حفظ وإرسال التمارين',
    noPersonalizedExercises: 'لا توجد تمارين مخصصة حاليا.',
    notificationNewPersonalizedExercise: 'تمت إضافة تمارين مخصصة جديدة لك في مادة {subject}.',

    insightsDashboard: 'تحليل الشكاوى (BETA)',
    analyzeComplaints: 'تحليل الشكاوى بالذكاء الاصطناعي',
    generatingAnalysis: 'جاري التحليل...',
    complaintAnalysis: 'تحليل الشكاوى',
    commonThemes: 'المواضيع المتكررة',
    sentimentSummary: 'ملخص المشاعر العامة',
    noComplaintsToAnalyze: 'لا توجد شكاوى كافية للتحليل.',

    classAlbum: 'ألبوم الفصل',
    addPhoto: 'إضافة صورة للألبوم',
    photoCaption: 'أضف تعليقاً على الصورة',
    savePhoto: 'حفظ الصورة',
    noPhotos: 'الألبوم فارغ حاليا.',
    notificationNewPhoto: 'تمت إضافة صورة جديدة إلى ألبوم الفصل.',
    reviewAlbumPhotos: 'مراجعة صور الألبوم',
    approve: 'قبول',
    reject: 'رفض',
    pendingReview: 'قيد المراجعة',
    approved: 'موافق عليه',
    photoSentForReview: 'تم إرسال الصورة للمراجعة بنجاح.',
    noPhotosToReview: 'لا توجد صور في انتظار المراجعة.',
    reviewAlbumPhotos_feature: 'خاصية: مراجعة صور الألبوم',
    notificationNewPhotoForReview: 'صورة جديدة من الأستاذ تنتظر المراجعة.',
    unifiedAssessments: 'التقويمات الموحدة',
    addUnifiedAssessment: 'إضافة تقويم موحد',
    assessmentTitle: 'عنوان التقويم',
    noAssessments: 'لا توجد تقويمات موحدة حاليا.',
    notificationNewUnifiedAssessment: 'تمت إضافة تقويم موحد جديد في مادة {subject}.',
    saveSuccess: 'تم الحفظ بنجاح!',
    confirmDeleteAssessment: 'هل أنت متأكد من حذف هذا التقويم؟',
    confirmDeleteQuiz: 'هل أنت متأكد من حذف هذا الاختبار؟',
    confirmDeleteProject: 'هل أنت متأكد من حذف هذا المشروع؟',

    notesAndAbsences: 'الملاحظات والغيابات',
    studentGrades: 'مستوى التلميذ(ة)',
    examProgram: 'برنامج الفروض',
    aiNotes: 'ملاحظات بالذكاء الإصطناعي',
    notes: 'الملاحظات',
    darkMode: "الوضع الليلي",
    
    // Stages and new subjects
    pre_schoolStage: "التعليم الأولي",
    primaryStage: "المرحلة الابتدائية",
    middleStage: "المرحلة الإعدادية",
    highStage: "المرحلة الثانوية",
    selectStage: "اختر المرحلة الدراسية",
    'اللغة الإنجليزية': 'اللغة الإنجليزية',
    'الفيزياء والكيمياء': 'الفيزياء والكيمياء',
    'علوم الحياة والأرض': 'علوم الحياة والأرض',
    'المعلوميات': 'المعلوميات',
    'الفلسفة': 'الفلسفة',
    'التربية الإسلامية': 'التربية الإسلامية',
    'الاجتماعيات': 'الاجتماعيات',
    'اللغة العربية': 'اللغة العربية',
    'اللغة الفرنسية': 'اللغة الفرنسية',
    'الرياضيات': 'الرياضيات',

    // New Feature Flags
    principalFeaturesSection: "ميزات المدير",
    teacherFeaturesSection: "ميزات المعلم",
    guardianFeaturesSection: "ميزات ولي الأمر",
    teacherManageSummaries_feature: 'خاصية: إدارة الملخصات',
    teacherManageExercises_feature: 'خاصية: إدارة التمارين',
    teacherManageNotesAndAbsences_feature: 'خاصية: إدارة الملاحظات والغياب',
    teacherManageGrades_feature: 'خاصية: إدارة النقط',
    teacherManageExamProgram_feature: 'خاصية: إدارة برنامج الفروض',
    teacherGenerateAiNotes_feature: 'خاصية: ملاحظات بالذكاء الاصطناعي',
    teacherLessonPlanner_feature: 'خاصية: مخطط الدروس بالذكاء الاصطناعي',
    teacherPersonalizedExercises_feature: 'خاصية: تمارين مخصصة بالذكاء الاصطناعي',
    teacherManageSupplementaryLessons_feature: 'خاصية: إدارة الدروس الداعمة',
    teacherManageUnifiedAssessments_feature: 'خاصية: إدارة التقويمات الموحدة',
    teacherManageTimetable_feature: 'خاصية: إدارة جداول الحصص',
    teacherManageQuizzes_feature: 'خاصية: إدارة الاختبارات القصيرة',
    teacherManageProjects_feature: 'خاصية: إدارة مشاريع الوحدة',
    teacherManageLibrary_feature: 'خاصية: إدارة المكتبة الرقمية',
    teacherManageAlbum_feature: 'خاصية: إدارة ألبوم الفصل',
    teacherViewAnnouncements_feature: 'خاصية: عرض الإعلانات للأساتذة',
    guardianViewSummaries_feature: 'خاصية: عرض الملخصات',
    guardianViewExercises_feature: 'خاصية: عرض التمارين',
    guardianViewNotesAndAbsences_feature: 'خاصية: عرض الملاحظات والغياب',
    guardianViewGrades_feature: 'خاصية: عرض النقط',
    guardianViewExamProgram_feature: 'خاصية: عرض برنامج الفروض',
    guardianViewPersonalizedExercises_feature: 'خاصية: عرض التمارين المخصصة',
    guardianViewSupplementaryLessons_feature: 'خاصية: عرض الدروس الداعمة',
    guardianViewUnifiedAssessments_feature: 'خاصية: عرض التقويمات الموحدة',
    guardianViewTimetable_feature: 'خاصية: عرض جدول الحصص',
    guardianViewQuizzes_feature: 'خاصية: عرض الاختبارات القصيرة',
    guardianViewProjects_feature: 'خاصية: عرض مشاريع الوحدة',
    guardianViewLibrary_feature: 'خاصية: عرض المكتبة الرقمية',
    guardianViewAlbum_feature: 'خاصية: عرض ألبوم الفصل',
    guardianPayFees_feature: 'خاصية: أداء الواجبات الشهرية',
    guardianSubmitComplaints_feature: 'خاصية: تقديم الشكاوى والاقتراحات',
    guardianRequestInterview_feature: 'خاصية: طلب مقابلة',

    // Talking Cards Feature
    talkingCards: "البطاقات الناطقة",
    teacherManageTalkingCards_feature: "خاصية: إدارة البطاقات الناطقة",
    guardianViewTalkingCards_feature: "خاصية: عرض البطاقات الناطقة",
    addTalkingCard: "إضافة بطاقة ناطقة",
    analyzeWithAI: "تحليل الصورة بالذكاء الاصطناعي",
    analyzing: "جاري التحليل...",
    reviewAIDetections: "مراجعة وتعديل النتائج",
    editAIDetections_desc: "يمكنك تعديل النصوص التي استخرجها الذكاء الاصطناعي أو حذفها قبل الحفظ.",
    saveCard: "حفظ البطاقة",
    cardSaved: "تم حفظ البطاقة بنجاح!",
    listen: "استماع",
    noTalkingCards: "لا توجد بطاقات ناطقة حاليا.",
    notificationNewTalkingCard: "تمت إضافة بطاقة ناطقة جديدة.",

    // Memorization Helper
    memorizationHelper: "مساعد الحفظ",
    teacherManageMemorization_feature: "خاصية: مساعد الحفظ للأستاذ",
    guardianViewMemorization_feature: "خاصية: مساعد الحفظ للتلميذ",
    addMemorizationItem: "إضافة مادة للحفظ",
    memorizationItemTitle: "عنوان المادة (مثال: سورة الفاتحة)",
    addByText: "إضافة نص",
    addByImage: "إضافة صورة",
    addByAudio: "تسجيل صوتي",
    contentText: "المحتوى النصي",
    recordAudio: "بدء التسجيل",
    stopRecording: "إيقاف التسجيل",
    listenToRecording: "الاستماع للتسجيل",
    saveItem: "حفظ المادة",
    itemSaved: "تم حفظ المادة بنجاح!",
    noMemorizationItems: "لا توجد مواد للحفظ حالياً.",
    repeat: "تكرار",
    repeatCount: "عدد مرات التكرار",
    infiniteRepeat: "تكرار مستمر",
    notificationNewMemorizationItem: "تمت إضافة مادة جديدة للحفظ في {subject}.",
    confirmDeleteMemorizationItem: "هل أنت متأكد من حذف هذه المادة؟",
    extractingTextFromImage: "جاري استخراج النص من الصورة...",
    
    // Super Admin Principal Management
    managePrincipals: "إدارة المديرين",
    principalManagementForStage: "إدارة المديرين للمرحلة: {stageName}",
    changePassword: "تغيير كلمة المرور",
    newPassword: "كلمة المرور الجديدة",
    savePassword: "حفظ كلمة المرور",
    principalName: "اسم المدير",
    confirmDeletePrincipal: "هل أنت متأكد من حذف المدير {name}؟",
    selectTeachers: 'اختر الأساتذة',
    all: 'الجميع',

    // Feedback Modal
    feedbackTitle: "ملاحظاتك تهمنا!",
    feedbackPrompt: "كيف تقيم تجربتك مع التطبيق؟",
    feedbackPlaceholder: "اكتب ملاحظاتك أو اقتراحاتك هنا لتحسين التطبيق...",
    send: "إرسال",
    later: "لاحقاً",
    feedbackThanks: "شكراً جزيلاً لملاحظاتك القيمة!",
    ratingRequired: "الرجاء تحديد تقييمك أولاً.",
    saveChanges: 'حفظ التغييرات',
  },
  fr: {
    discoverPleasureOfLearning: "Découvrir le plaisir d'apprendre",
    back: "Retour",
    logout: "Déconnexion",
    comingSoonTitle: "Bientôt...",
    comingSoonMessage: "Cette fonctionnalité est en cours de développement. Restez à l'écoute pour les mises à jour !",
    notifications: "Notifications",
    noNewNotifications: "Aucune nouvelle notification.",
    notificationMessage: "Une nouvelle observation a été ajoutée par l'enseignant en {subject}.",
    notificationNewSummary: "Un nouveau résumé a été ajouté en {subject}.",
    notificationNewExercise: "De nouveaux exercices ont été ajoutés en {subject}.",
    notificationNewExamProgram: "Un nouveau programme de devoirs a été ajouté en {subject}.",
    unifiedLoginWelcome: "Bienvenue à l'application Imtiaz",
    unifiedLoginPrompt: "Veuillez entrer votre code d'accès",
    loginCodePlaceholder: "Code d'accès",
    login: "Connexion",
    requestHelp: "Demander de l'aide",
    helpNote: "Note: En cliquant sur 'Demander de l'aide', vous serez redirigé pour passer un appel téléphonique.",
    invalidCode: "Code invalide. Veuillez réessayer ou demander de l'aide.",
    superAdminDashboardTitle: "Tableau de Bord Super Admin",
    addSchoolSectionTitle: "Ajouter une nouvelle école",
    newSchoolNamePlaceholder: "Nom de la nouvelle école",
    principalSecretCodePlaceholder: "Code secret du directeur",
    addSchool: "Ajouter l'école",
    enterSchoolNameAndCode: "Veuillez entrer le nom de l'école et le code du directeur.",
    currentSchools: "Écoles actuelles",
    principalCodeLabel: "Code du directeur",
    delete: "Supprimer",
    confirmDeleteSchool: "Êtes-vous sûr de vouloir supprimer l'école \"{schoolName}\" ? Toutes ses données seront définitivement effacées.",
    noSchoolsAdded: "Aucune école ajoutée pour le moment.",
    principalDashboardTitle: "Tableau de Bord du Directeur",
    principalWelcome: "Bienvenue. Choisissez une action.",
    manageTeachers: "Gérer les Enseignants",
    manageStudents: "Gérer les Élèves",
    announcements: "Annonces",
    exercises: "Exercices",
    summaries: 'Résumés',
    complaintsAndSuggestions: "Voir Plaintes et Suggestions",
    educationalTips: "Conseils Pédagogiques",
    performanceTracking: "Suivi des Performances",
    reviewNotes: "Réviser les Observations",
    guardianDashboardTitle: "Tableau de Bord Parent",
    studentLevel: "Niveau",
    selectSubjectToFollow: "Choisissez une matière à suivre",
    viewAnnouncements: "Voir les Annonces",
    viewEducationalTips: "Voir les Conseils",
    submitComplaintOrSuggestion: "Soumettre une Plainte/Suggestion",
    teacherDashboardTitle: "Tableau de Bord Enseignant(e)",
    teacherSelectLevelAndSubject: "Veuillez sélectionner le niveau et la matière",
    level: "Niveau",
    subject: "Matière",
    next: "Suivant",
    add: 'Ajouter',
    teacherName: "Nom de l'enseignant(e)",
    loginCode: "Code d'accès",
    levels: 'Niveaux',
    classes: 'Groupes',
    addTeacher: 'Ajouter un enseignant',
    existingTeachers: 'Enseignants actuels',
    confirmDeleteTeacher: 'Êtes-vous sûr de vouloir supprimer {name} ?',
    noTeachers: 'Aucun enseignant pour le moment.',
    edit: 'Modifier',
    updateTeacher: 'Mettre à jour',
    announcementContent: "Contenu de l'annonce",
    attachFile: 'Joindre un fichier (Image ou PDF)',
    targetAudience: 'Envoyer à',
    guardians: 'Parents',
    teachers: 'Enseignants',
    sendAnnouncement: "Envoyer l'annonce",
    sentAnnouncements: 'Annonces envoyées',
    complaintContent: 'Contenu de la plainte / suggestion',
    submit: 'Envoyer',
    receivedComplaints: 'Plaintes et suggestions reçues',
    fromGuardianOf: 'Du parent de',
    educationalTipContent: 'Contenu du conseil',
    generateWithAI: "Générer avec l'IA",
    sendTip: 'Envoyer le conseil',
    sentTips: 'Conseils envoyés',
    performanceOverview: 'Aperçu des performances',
    averageGradePerLevel: 'Moyenne par niveau',
    levelPerformance: 'Performance du niveau : {level}',
    studentName: "Nom de l'élève",
    averageGrade: 'Moyenne générale',
    performanceTrend: 'Courbe de tendance',
    noComplaints: 'Aucune plainte ou suggestion pour le moment.',
    noAnnouncements: 'Aucune annonce pour le moment.',
    noTips: 'Aucun conseil pour le moment.',
    confirm: 'Confirmer',
    cancel: 'Annuler',
    fillAllFields: 'Veuillez remplir tous les champs.',
    guardianNotesTitle: 'Observations & Absences',
    addStudent: 'Ajouter un élève',
    guardianCode: 'Code du parent',
    existingStudents: 'Élèves actuels',
    confirmDeleteStudent: "Êtes-vous sûr de vouloir supprimer l'élève {name} ?",
    noStudents: 'Aucun élève actuellement.',
    class: 'Classe',
    statisticsDashboard: 'Tableau de statistiques',
    interviewRequests: "Demandes d'entretien",
    monthlyFees: 'Frais mensuels',
    schoolManagement: "Gestion de l'école",
    importFromExcel: 'Importer des élèves depuis Excel',
    importInstructions: "Le fichier doit avoir 2 colonnes : Nom de l'élève, Code du parent.",
    selectFile: 'Sélectionner un fichier Excel',
    import: 'Importer',
    importSuccess: '{count} élèves importés avec succès.',
    importError: "Erreur lors de l'importation. Veuillez vérifier le format du fichier.",
    selectLevelAndClass: "Veuillez d'abord sélectionner un niveau et une classe.",
    manageSchool: "Gérer l'école",
    schoolStatus: "Statut de l'école",
    active: 'Actif',
    inactive: 'Inactif',
    maintenanceTitle: 'Application en Maintenance',
    maintenanceMessage: "L'application est actuellement en maintenance. Veuillez réessayer plus tard.",
    statisticsDashboard_feature: "Fonctionnalité : Tableau de statistiques",
    educationalTips_feature: "Fonctionnalité : Conseils Pédagogiques",
    announcements_feature: "Fonctionnalité : Annonces",
    complaintsAndSuggestions_feature: "Fonctionnalité : Plaintes et Suggestions",
    reviewNotes_feature: "Fonctionnalité : Réviser les Observations",
    monthlyFees_feature: "Fonctionnalité : Frais Mensuels",
    interviewRequests_feature: "Fonctionnalité : Demandes d'entretien",
    schoolManagement_feature: "Fonctionnalité : Gestion de l'école",
    manage: "Gérer",
    featureToggleTitle: "Activer / Désactiver les Fonctionnalités",
    browseAsTeacher: "Naviguer en tant qu'enseignant",
    browseAsTeacher_feature: "Fonctionnalité : Naviguer en tant qu'enseignant",
    selectLevelAndSubjectPrompt: "Veuillez sélectionner le niveau, la matière et la classe",
    selectClassPrompt: "Veuillez sélectionner la classe",
    sendForReview: "Envoyer pour révision",
    sentForReviewSuccess: "Observation envoyée pour révision avec succès !",
    aiGeneratedNote: "✨ Note générée par IA",
    feeNotification: "L'élève {studentName} a payé les frais mensuels de {amount} MAD.",
    payNow: "Payer maintenant",
    paymentAmount: "Montant du paiement (MAD)",
    paymentHistory: "Historique des paiements",
    paidOn: "Payé le",
    paymentSuccessful: "Paiement réussi !",
    requestInterview: "Demander un entretien",
    confirmRequestInterview: "Confirmer la demande d'entretien",
    requestSent: "Votre demande a été envoyée.",
    paymentStatus: "Statut du paiement",
    paid: "Payé",
    notPaid: "Non payé",
    markAsPaid: "Marquer comme 'Payé'",
    principalFeeManagement: "Statut du paiement des frais par élève",
    noInterviewRequests: "Aucune demande d'entretien pour le moment.",
    requestFrom: "Demande du parent de {studentName}",
    markAsCompleted: "Marquer comme terminé",
    monthlyFeePrompt: "Ici, vous pouvez suivre et payer les frais de scolarité mensuels pour l'année scolaire.",
    noPayments: "Aucun historique de paiement.",
    requestInterviewPrompt: "Voulez-vous confirmer une demande d'entretien avec la direction ?",
    payByCard: "Paiement par carte bancaire",
    cardDetails: "Détails de la carte",
    cardNumber: "Numéro de carte",
    expiryDate: "Date d'expiration (MM/AA)",
    cvc: "Code de sécurité (CVC)",
    cardholderName: "Nom du titulaire",
    confirmPayment: "Confirmer le paiement",
    processingPayment: "Traitement du paiement...",
    academicYearMonths: "Mois de l'année scolaire",
    paymentDue: "Paiement dû",
    paymentCompleted: "Paiement effectué",
    pay: "Payer",
    setMonthlyFee: 'Définir les Frais Mensuels',
    monthlyFeeAmountLabel: 'Montant des Frais Mensuels (MAD)',
    transportation: 'Transport',
    monthlyFee: 'Frais Mensuels',
    totalAmount: 'Montant Total',
    setTransportationFee: 'Définir les frais de transport',
    transportationFeeAmountLabel: 'Montant des frais de transport (MAD)',

    // Features from user prompt
    supplementaryLessons: 'Leçons de soutien interactives',
    addSupplementaryLesson: 'Ajouter une leçon de soutien',
    lessonTitle: 'Titre de la leçon/lien',
    externalLink: 'Lien externe (YouTube, site web... etc.)',
    addLink: 'Ajouter le lien',
    noLessons: 'Aucune leçon de soutien pour le moment.',
    
    timetable: 'Emploi du temps',
    addTimetable: 'Ajouter un emploi du temps',
    uploadTimetable: "Télécharger l'emploi du temps (Image ou PDF)",
    noTimetable: "Aucun emploi du temps disponible.",

    quizzes: 'Quiz rapides',
    addQuiz: 'Ajouter un quiz',
    generateQuizFromImage: "Générer un quiz à partir d'une image",
    uploadImageForQuiz: 'Téléchargez une image pour créer un quiz',
    generatingQuiz: "Génération du quiz par l'IA...",
    quizGenerated: 'Quiz généré ! Veuillez le vérifier avant de sauvegarder.',
    saveQuiz: 'Sauvegarder le quiz',
    noQuizzes: 'Aucun quiz disponible pour le moment.',

    unitProject: 'Projet d’unité',
    addProject: 'Ajouter un projet',
    projectTitle: 'Titre du projet',
    projectDescription: 'Description du projet',
    takePhoto: 'Prendre une photo',
    uploadPhoto: 'Télécharger une image',
    noProjects: 'Aucun projet pour le moment.',
    capture: 'Capturer',

    digitalLibrary: 'Bibliothèque numérique',
    addBook: 'Ajouter un livre',
    bookTitle: 'Titre du livre',
    bookDescription: 'Description',
    uploadBook: 'Télécharger le livre (PDF)',
    download: 'Télécharger',
    noBooks: 'La bibliothèque est vide.',
    
    manageFees: 'Gérer les Frais',
    update: 'Mettre à jour',
    feesUpdated: 'Frais mis à jour avec succès !',

    // New AI Features & Album
    lessonPlanner: 'Planificateur de Leçons',
    lessonTopic: 'Sujet de la leçon',
    generatePlan: 'Générer le Plan',
    generatingPlan: 'Génération du plan...',
    lessonPlan: 'Plan de Leçon',
    learningObjectives: 'Objectifs Pédagogiques',
    inClassActivities: 'Activités en Classe',
    homework: 'Devoirs',
    discussionQuestions: 'Questions de Discussion',

    personalizedExercises: 'Exercices Personnalisés',
    generateExercises: 'Générer des exercices',
    selectStudentForExercises: 'Sélectionnez un élève pour générer des exercices personnalisés',
    generatingExercises: 'Génération des exercices...',
    supportExercises: 'Exercices de soutien',
    enrichmentExercises: "Exercices d'approfondissement",
    saveAndSendExercises: 'Enregistrer et envoyer',
    noPersonalizedExercises: "Aucun exercice personnalisé pour le moment.",
    notificationNewPersonalizedExercise: 'De nouveaux exercices personnalisés ont été ajoutés pour vous en {subject}.',

    insightsDashboard: 'Analyse des Plaintes (BETA)',
    analyzeComplaints: 'Analyser les plaintes avec l’IA',
    generatingAnalysis: 'Analyse en cours...',
    complaintAnalysis: 'Analyse des Plaintes',
    commonThemes: 'Thèmes récurrents',
    sentimentSummary: 'Résumé du Sentiment Général',
    noComplaintsToAnalyze: 'Pas assez de plaintes à analyser.',

    classAlbum: 'Album de la Classe',
    addPhoto: "Ajouter une photo à l'album",
    photoCaption: 'Ajouter une légende',
    savePhoto: 'Enregistrer la Photo',
    noPhotos: "L'album est vide pour le moment.",
    notificationNewPhoto: 'Une nouvelle photo a été ajoutée à l’album de la classe.',
    reviewAlbumPhotos: "Réviser les photos de l'album",
    approve: 'Approuver',
    reject: 'Rejeter',
    pendingReview: 'En attente',
    approved: 'Approuvé',
    photoSentForReview: 'Photo envoyée pour révision.',
    noPhotosToReview: 'Aucune photo en attente de révision.',
    reviewAlbumPhotos_feature: "Fonctionnalité : Révision des photos",
    notificationNewPhotoForReview: 'Nouvelle photo en attente de révision.',
    unifiedAssessments: 'Évaluations Unifiées',
    addUnifiedAssessment: 'Ajouter une Évaluation Unifiée',
    assessmentTitle: "Titre de l'Évaluation",
    noAssessments: "Aucune évaluation unifiée pour le moment.",
    notificationNewUnifiedAssessment: 'Une nouvelle évaluation unifiée a été ajoutée en {subject}.',
    saveSuccess: 'Enregistré avec succès !',
    confirmDeleteAssessment: "Êtes-vous sûr de vouloir supprimer cette évaluation ?",
    confirmDeleteQuiz: "Êtes-vous sûr de vouloir supprimer ce quiz ?",
    confirmDeleteProject: "Êtes-vous sûr de vouloir supprimer ce projet ?",
    
    notesAndAbsences: 'Notes et Absences',
    studentGrades: "Notes de l'élève",
    examProgram: 'Programme des Devoirs',
    aiNotes: 'Notes par IA',
    notes: 'Observations',
    darkMode: "Mode Nuit",

    // Stages and new subjects
    pre_schoolStage: "Cycle Préscolaire",
    primaryStage: "Cycle Primaire",
    middleStage: "Cycle Collégial",
    highStage: "Cycle Secondaire",
    selectStage: "Choisissez le cycle d'enseignement",
    'اللغة الإنجليزية': 'Anglais',
    'الفيزياء والكيمياء': 'Physique-Chimie',
    'علوم الحياة والأرض': 'SVT',
    'المعلوميات': 'Informatique',
    'الفلسفة': 'Philosophie',
    'التربية الإسلامية': 'Éducation Islamique',
    'الاجتماعيات': 'Histoire-Géographie',
    'اللغة العربية': 'Langue Arabe',
    'اللغة الفرنسية': 'Langue Française',
    'الرياضيات': 'Mathématiques',
    
    // New Feature Flags
    principalFeaturesSection: "Fonctionnalités du Directeur",
    teacherFeaturesSection: "Fonctionnalités de l'Enseignant",
    guardianFeaturesSection: "Fonctionnalités du Parent",
    teacherManageSummaries_feature: 'Fonctionnalité: Gérer les résumés',
    teacherManageExercises_feature: 'Fonctionnalité: Gérer les exercices',
    teacherManageNotesAndAbsences_feature: 'Fonctionnalité: Gérer les notes et absences',
    teacherManageGrades_feature: 'Fonctionnalité: Gérer les notes',
    teacherManageExamProgram_feature: 'Fonctionnalité: Gérer le programme des examens',
    teacherGenerateAiNotes_feature: 'Fonctionnalité: Notes par IA',
    teacherLessonPlanner_feature: 'Fonctionnalité: Planificateur de leçons IA',
    teacherPersonalizedExercises_feature: 'Fonctionnalité: Exercices personnalisés IA',
    teacherManageSupplementaryLessons_feature: 'Fonctionnalité: Gérer les leçons de soutien',
    teacherManageUnifiedAssessments_feature: 'Fonctionnalité: Gérer les évaluations unifiées',
    teacherManageTimetable_feature: 'Fonctionnalité: Gérer l’emploi du temps',
    teacherManageQuizzes_feature: 'Fonctionnalité: Gérer les quiz',
    teacherManageProjects_feature: 'Fonctionnalité: Gérer les projets',
    teacherManageLibrary_feature: 'Fonctionnalité: Gérer la bibliothèque',
    teacherManageAlbum_feature: 'Fonctionnalité: Gérer l’album de classe',
    teacherViewAnnouncements_feature: "Fonctionnalité : Voir les annonces pour les enseignants",
    guardianViewSummaries_feature: 'Fonctionnalité: Voir les résumés',
    guardianViewExercises_feature: 'Fonctionnalité: Voir les exercices',
    guardianViewNotesAndAbsences_feature: 'Fonctionnalité: Voir les notes et absences',
    guardianViewGrades_feature: 'Fonctionnalité: Voir les notes',
    guardianViewExamProgram_feature: 'Fonctionnalité: Voir le programme des examens',
    guardianViewPersonalizedExercises_feature: 'Fonctionnalité: Voir les exercices personnalisés',
    guardianViewSupplementaryLessons_feature: 'Fonctionnalité: Voir les leçons de soutien',
    guardianViewUnifiedAssessments_feature: 'Fonctionnalité: Voir les évaluations unifiées',
    guardianViewTimetable_feature: 'Fonctionnalité: Voir l’emploi du temps',
    guardianViewQuizzes_feature: 'Fonctionnalité: Voir les quiz',
    guardianViewProjects_feature: 'Fonctionnalité: Voir les projets',
    guardianViewLibrary_feature: 'Fonctionnalité: Voir la bibliothèque',
    guardianViewAlbum_feature: 'Fonctionnalité: Voir l’album de classe',
    guardianPayFees_feature: 'Fonctionnalité: Payer les frais mensuels',
    guardianSubmitComplaints_feature: 'Fonctionnalité: Soumettre des plaintes',
    guardianRequestInterview_feature: 'Fonctionnalité: Demander un entretien',

    // Talking Cards Feature
    talkingCards: "Cartes Parlantes",
    teacherManageTalkingCards_feature: "Fonctionnalité : Gérer les cartes parlantes",
    guardianViewTalkingCards_feature: "Fonctionnalité : Voir les cartes parlantes",
    addTalkingCard: "Ajouter une carte parlante",
    analyzeWithAI: "Analyser l'image avec l'IA",
    analyzing: "Analyse en cours...",
    reviewAIDetections: "Réviser les détections de l'IA",
    editAIDetections_desc: "Vous pouvez modifier ou supprimer les étiquettes détectées par l'IA avant de sauvegarder.",
    saveCard: "Enregistrer la carte",
    cardSaved: "Carte enregistrée avec succès !",
    listen: "Écouter",
    noTalkingCards: "Aucune carte parlante pour le moment.",
    notificationNewTalkingCard: "Une nouvelle carte parlante a été ajoutée.",

    // Memorization Helper
    memorizationHelper: "Aide à la mémorisation",
    teacherManageMemorization_feature: "Fonctionnalité: Aide à la mémorisation (Enseignant)",
    guardianViewMemorization_feature: "Fonctionnalité: Aide à la mémorisation (Élève)",
    addMemorizationItem: "Ajouter un élément à mémoriser",
    memorizationItemTitle: "Titre (Ex: Sourate Al-Fatiha)",
    addByText: "Ajouter du texte",
    addByImage: "Ajouter une image",
    addByAudio: "Enregistrer l'audio",
    contentText: "Contenu texte",
    recordAudio: "Démarrer l'enregistrement",
    stopRecording: "Arrêter l'enregistrement",
    listenToRecording: "Écouter l'enregistrement",
    saveItem: "Enregistrer l'élément",
    itemSaved: "Élément enregistré avec succès !",
    noMemorizationItems: "Aucun élément à mémoriser pour le moment.",
    repeat: "Répéter",
    repeatCount: "Nombre de répétitions",
    infiniteRepeat: "Répétition infinie",
    notificationNewMemorizationItem: "Un nouvel élément à mémoriser a été ajouté en {subject}.",
    confirmDeleteMemorizationItem: "Êtes-vous sûr de vouloir supprimer cet élément ?",
    extractingTextFromImage: "Extraction du texte de l'image...",
    
    // Super Admin Principal Management
    managePrincipals: "Gérer les Directeurs",
    principalManagementForStage: "Gestion des Directeurs pour {stageName}",
    changePassword: "Changer le mot de passe",
    newPassword: "Nouveau mot de passe",
    savePassword: "Enregistrer le mot de passe",
    principalName: "Nom du Directeur",
    confirmDeletePrincipal: "Êtes-vous sûr de vouloir supprimer le directeur {name} ?",
    selectTeachers: 'Sélectionner les enseignants',
    all: 'Tous',

    // Feedback Modal
    feedbackTitle: "Votre avis nous intéresse !",
    feedbackPrompt: "Comment évalueriez-vous votre expérience avec l'application ?",
    feedbackPlaceholder: "Écrivez vos commentaires ou suggestions ici pour améliorer l'application...",
    send: "Envoyer",
    later: "Plus tard",
    feedbackThanks: "Merci beaucoup pour vos précieux commentaires !",
    ratingRequired: "Veuillez d'abord sélectionner une note.",
    saveChanges: 'Enregistrer les modifications',
  },
  en: {
    discoverPleasureOfLearning: "Discover the pleasure of learning",
    back: "Back",
    logout: "Logout",
    comingSoonTitle: "Coming Soon...",
    comingSoonMessage: "This feature is currently under development. Stay tuned for updates!",
    notifications: "Notifications",
    noNewNotifications: "No new notifications.",
    notificationMessage: "A new note has been added by the teacher in {subject}.",
    notificationNewSummary: "A new summary has been added in {subject}.",
    notificationNewExercise: "New exercises have been added in {subject}.",
    notificationNewExamProgram: "A new exam program has been added in {subject}.",
    unifiedLoginWelcome: "Welcome to the Imtiaz App",
    unifiedLoginPrompt: "Please enter your access code",
    loginCodePlaceholder: "Access Code",
    login: "Login",
    requestHelp: "Request Help",
    helpNote: "Note: Clicking 'Request Help' will automatically redirect you to make a phone call.",
    invalidCode: "Invalid code. Please try again or request help.",
    superAdminDashboardTitle: "Super Admin Dashboard",
    addSchoolSectionTitle: "Add a New School",
    newSchoolNamePlaceholder: "New School Name",
    principalSecretCodePlaceholder: "Principal's Secret Code",
    addSchool: "Add School",
    enterSchoolNameAndCode: "Please enter the school name and principal's code.",
    currentSchools: "Current Schools",
    principalCodeLabel: "Principal Code",
    delete: "Delete",
    confirmDeleteSchool: "Are you sure you want to delete the school \"{schoolName}\"? All its data will be permanently deleted.",
    noSchoolsAdded: "No schools added yet.",
    principalDashboardTitle: "Principal's Dashboard",
    principalWelcome: "Welcome. Please select an action.",
    manageTeachers: "Manage Teachers",
    manageStudents: "Manage Students",
    announcements: "Announcements",
    exercises: "Weekly Exercises",
    summaries: 'Summaries',
    complaintsAndSuggestions: "View Complaints & Suggestions",
    educationalTips: "Educational Tips",
    performanceTracking: "Performance Tracking",
    reviewNotes: "Review Notes",
    guardianDashboardTitle: "Guardian's Dashboard",
    studentLevel: "Level",
    selectSubjectToFollow: "Select a subject to follow",
    viewAnnouncements: "View Announcements",
    viewEducationalTips: "View Educational Tips",
    submitComplaintOrSuggestion: "Submit Complaint/Suggestion",
    teacherDashboardTitle: "Teacher's Dashboard",
    teacherSelectLevelAndSubject: "Please select the level and subject",
    level: "Level",
    subject: "Subject",
    next: "Next",
    add: 'Add',
    teacherName: 'Teacher Name',
    loginCode: 'Login Code',
    levels: 'Levels',
    classes: 'Classes',
    addTeacher: 'Add Teacher',
    existingTeachers: 'Existing Teachers',
    confirmDeleteTeacher: 'Are you sure you want to delete {name}?',
    noTeachers: 'No teachers currently.',
    edit: 'Edit',
    updateTeacher: 'Update Teacher',
    announcementContent: 'Announcement Content',
    attachFile: 'Attach File (Image or PDF)',
    targetAudience: 'Send to',
    guardians: 'Guardians',
    teachers: 'Teachers',
    sendAnnouncement: 'Send Announcement',
    sentAnnouncements: 'Sent Announcements',
    complaintContent: 'Complaint / Suggestion Content',
    submit: 'Submit',
    receivedComplaints: 'Received Complaints & Suggestions',
    fromGuardianOf: "From the guardian of",
    educationalTipContent: 'Tip Content',
    generateWithAI: 'Generate with AI',
    sendTip: 'Send Tip',
    sentTips: 'Sent Tips',
    performanceOverview: 'Performance Overview',
    averageGradePerLevel: 'Average Grade per Level',
    levelPerformance: 'Performance for Level: {level}',
    studentName: 'Student Name',
    averageGrade: 'Overall Average',
    performanceTrend: 'Performance Trend',
    noComplaints: 'No complaints or suggestions at the moment.',
    noAnnouncements: 'No announcements at the moment.',
    noTips: 'No tips at the moment.',
    confirm: 'Confirm',
    cancel: 'Cancel',
    fillAllFields: 'Please fill in all fields.',
    guardianNotesTitle: 'Notes & Absences',
    addStudent: 'Add Student',
    guardianCode: "Guardian's Code",
    existingStudents: 'Existing Students',
    confirmDeleteStudent: 'Are you sure you want to delete the student {name}?',
    noStudents: 'No students currently.',
    class: 'Class',
    statisticsDashboard: 'Statistics Dashboard',
    interviewRequests: 'Interview Requests',
    monthlyFees: 'Monthly Fees',
    schoolManagement: 'School Management',
    importFromExcel: 'Import Students from Excel',
    importInstructions: 'The file must have 2 columns: Student Name, Guardian Code.',
    selectFile: 'Select Excel File',
    import: 'Import',
    importSuccess: '{count} students imported successfully.',
    importError: 'Error importing file. Please check the file format.',
    selectLevelAndClass: 'Please select a level and class first.',
    manageSchool: 'Manage School',
    schoolStatus: 'School Status',
    active: 'Active',
    inactive: 'Inactive',
    maintenanceTitle: 'Application Under Maintenance',
    maintenanceMessage: 'The application is currently undergoing maintenance. Please try again later.',
    statisticsDashboard_feature: "Feature: Statistics Dashboard",
    educationalTips_feature: "Feature: Educational Tips",
    announcements_feature: "Feature: Announcements",
    complaintsAndSuggestions_feature: "Feature: Complaints & Suggestions",
    reviewNotes_feature: "Feature: Review Notes",
    monthlyFees_feature: "Feature: Monthly Fees",
    interviewRequests_feature: "Feature: Interview Requests",
    schoolManagement_feature: "Feature: School Management",
    manage: "Manage",
    featureToggleTitle: "Enable / Disable Features",
    browseAsTeacher: "Browse as Teacher",
    browseAsTeacher_feature: "Feature: Browse as Teacher",
    selectLevelAndSubjectPrompt: "Please select the level, subject, and class",
    selectClassPrompt: "Please select the class",
    sendForReview: "Send for Review",
    sentForReviewSuccess: "Comment sent for review successfully!",
    aiGeneratedNote: "✨ AI-Generated Note",
    feeNotification: "Student {studentName} has paid the monthly fee of {amount} MAD.",
    payNow: "Pay Now",
    paymentAmount: "Payment Amount (MAD)",
    paymentHistory: "Payment History",
    paidOn: "Paid on",
    paymentSuccessful: "Payment successful!",
    requestInterview: "Request Interview",
    confirmRequestInterview: "Confirm Interview Request",
    requestSent: "Your request has been sent.",
    paymentStatus: "Payment Status",
    paid: "Paid",
    notPaid: "Not Paid",
    markAsPaid: "Mark as Paid",
    principalFeeManagement: "Student Fee Payment Status",
    noInterviewRequests: "No interview requests at the moment.",
    requestFrom: "Request from the guardian of {studentName}",
    markAsCompleted: "Mark as Completed",
    monthlyFeePrompt: "Here you can track and pay the monthly school fees for the academic year.",
    noPayments: "No payment history.",
    requestInterviewPrompt: "Would you like to confirm an interview request with the administration?",
    payByCard: "Pay by Card",
    cardDetails: "Card Details",
    cardNumber: "Card Number",
    expiryDate: "Expiry Date (MM/YY)",
    cvc: "CVC",
    cardholderName: "Cardholder Name",
    confirmPayment: "Confirm Payment",
    processingPayment: "Processing Payment...",
    academicYearMonths: "Academic Year Months",
    paymentDue: "Payment Due",
    paymentCompleted: "Payment Completed",
    pay: "Pay",
    setMonthlyFee: 'Set Monthly Fee',
    monthlyFeeAmountLabel: 'Monthly Fee Amount (MAD)',
    transportation: 'Transportation',
    monthlyFee: 'Monthly Fee',
    totalAmount: 'Total Amount',
    setTransportationFee: 'Set Transportation Fee',
    transportationFeeAmountLabel: 'Transportation Fee Amount (MAD)',

    // Features from user prompt
    supplementaryLessons: 'Supplementary & Interactive Lessons',
    addSupplementaryLesson: 'Add Supplementary Lesson',
    lessonTitle: 'Lesson/Link Title',
    externalLink: 'External Link (YouTube, website... etc.)',
    addLink: 'Add Link',
    noLessons: 'No supplementary lessons currently.',
    
    timetable: 'Timetable',
    addTimetable: 'Add Timetable',
    uploadTimetable: 'Upload Timetable (Image or PDF)',
    noTimetable: 'No timetable currently available.',

    quizzes: 'Quizzes',
    addQuiz: 'Add Quiz',
    generateQuizFromImage: 'Generate Quiz from Image',
    uploadImageForQuiz: 'Upload an image of a summary or exercises to create a quiz',
    generatingQuiz: 'Generating quiz with AI...',
    quizGenerated: 'Quiz generated! Please review before saving.',
    saveQuiz: 'Save Quiz',
    noQuizzes: 'No quizzes currently available.',

    unitProject: 'Unit Project',
    addProject: 'Add Project',
    projectTitle: 'Project Title',
    projectDescription: 'Project Description',
    takePhoto: 'Take Photo',
    uploadPhoto: 'Upload Photo',
    noProjects: 'No projects currently.',
    capture: 'Capture',

    digitalLibrary: 'Digital Classroom Library',
    addBook: 'Add Book or Story',
    bookTitle: 'Book Title',
    bookDescription: 'Short Description',
    uploadBook: 'Upload Book (PDF)',
    download: 'Download',
    noBooks: 'The library is currently empty.',
    
    manageFees: 'Manage Fees',
    update: 'Update',
    feesUpdated: 'Fees updated successfully!',

    // New AI Features & Album
    lessonPlanner: 'Lesson Planner',
    lessonTopic: 'Lesson Topic',
    generatePlan: 'Generate Plan',
    generatingPlan: 'Generating plan...',
    lessonPlan: 'Lesson Plan',
    learningObjectives: 'Learning Objectives',
    inClassActivities: 'In-Class Activities',
    homework: 'Homework',
    discussionQuestions: 'Discussion Questions',

    personalizedExercises: 'Personalized Exercises',
    generateExercises: 'Generate Personalized Exercises',
    selectStudentForExercises: 'Select a student to generate personalized exercises',
    generatingExercises: 'Generating exercises...',
    supportExercises: 'Support Exercises',
    enrichmentExercises: 'Enrichment Exercises',
    saveAndSendExercises: 'Save and Send Exercises',
    noPersonalizedExercises: 'No personalized exercises currently.',
    notificationNewPersonalizedExercise: 'New personalized exercises have been added for you in {subject}.',

    insightsDashboard: 'Complaints Analysis (BETA)',
    analyzeComplaints: 'Analyze Complaints with AI',
    generatingAnalysis: 'Analyzing...',
    complaintAnalysis: 'Complaint Analysis',
    commonThemes: 'Common Themes',
    sentimentSummary: 'Overall Sentiment Summary',
    noComplaintsToAnalyze: 'Not enough complaints to analyze.',
    
    classAlbum: 'Class Album',
    addPhoto: 'Add Photo to Album',
    photoCaption: 'Add a caption',
    savePhoto: 'Save Photo',
    noPhotos: 'The album is currently empty.',
    notificationNewPhoto: 'A new photo has been added to the class album.',
    reviewAlbumPhotos: 'Review Album Photos',
    approve: 'Approve',
    reject: 'Reject',
pendingReview: 'Pending Review',
    approved: 'Approved',
    photoSentForReview: 'Photo sent for review successfully.',
    noPhotosToReview: 'No photos pending review.',
    reviewAlbumPhotos_feature: 'Feature: Review Album Photos',
    notificationNewPhotoForReview: 'New photo is pending review.',
    unifiedAssessments: 'Unified Assessments',
    addUnifiedAssessment: 'Add Unified Assessment',
    assessmentTitle: 'Assessment Title',
    noAssessments: 'No unified assessments at the moment.',
    notificationNewUnifiedAssessment: 'A new unified assessment has been added in {subject}.',
    saveSuccess: 'Saved successfully!',
    confirmDeleteAssessment: 'Are you sure you want to delete this assessment?',
    confirmDeleteQuiz: 'Are you sure you want to delete this quiz?',
    confirmDeleteProject: 'Are you sure you want to delete this project?',
    
    notesAndAbsences: 'Notes & Absences',
    studentGrades: 'Student Grades',
    examProgram: 'Exam Program',
    aiNotes: 'AI-Generated Notes',
    notes: 'Notes',
    darkMode: "Dark Mode",
    
    // Stages and new subjects
    pre_schoolStage: "Pre-School Stage",
    primaryStage: "Primary Level",
    middleStage: "Middle School Level",
    highStage: "High School Level",
    selectStage: "Select Educational Stage",
    'اللغة الإنجليزية': 'English',
    'الفيزياء والكيمياء': 'Physics & Chemistry',
    'علوم الحياة والأرض': 'Natural Sciences',
    'المعلوميات': 'Computer Science',
    'الفلسفة': 'Philosophy',
    'التربية الإسلامية': 'Islamic Education',
    'الاجتماعيات': 'Social Studies',
    'اللغة العربية': 'Arabic',
    'اللغة الفرنسية': 'French',
    'الرياضيات': 'Mathematics',

    // New Feature Flags
    principalFeaturesSection: "Principal Features",
    teacherFeaturesSection: "Teacher Features",
    guardianFeaturesSection: "Guardian Features",
    teacherManageSummaries_feature: 'Feature: Manage Summaries',
    teacherManageExercises_feature: 'Feature: Manage Exercises',
    teacherManageNotesAndAbsences_feature: 'Feature: Manage Notes & Absences',
    teacherManageGrades_feature: 'Feature: Manage Grades',
    teacherManageExamProgram_feature: 'Feature: Manage Exam Program',
    teacherGenerateAiNotes_feature: 'Feature: AI-Generated Notes',
    teacherLessonPlanner_feature: 'Feature: AI Lesson Planner',
    teacherPersonalizedExercises_feature: 'Feature: AI Personalized Exercises',
    teacherManageSupplementaryLessons_feature: 'Feature: Manage Supplementary Lessons',
    teacherManageUnifiedAssessments_feature: 'Feature: Manage Unified Assessments',
    teacherManageTimetable_feature: 'Feature: Manage Timetable',
    teacherManageQuizzes_feature: 'Feature: Manage Quizzes',
    teacherManageProjects_feature: 'Feature: Manage Projects',
    teacherManageLibrary_feature: 'Feature: Manage Library',
    teacherManageAlbum_feature: 'Feature: Manage Class Album',
    teacherViewAnnouncements_feature: 'Feature: View Teacher Announcements',
    guardianViewSummaries_feature: 'Feature: View Summaries',
    guardianViewExercises_feature: 'Feature: View Exercises',
    guardianViewNotesAndAbsences_feature: 'Feature: View Notes & Absences',
    guardianViewGrades_feature: 'Feature: View Grades',
    guardianViewExamProgram_feature: 'Feature: View Exam Program',
    guardianViewPersonalizedExercises_feature: 'Feature: View Personalized Exercises',
    guardianViewSupplementaryLessons_feature: 'Feature: View Supplementary Lessons',
    guardianViewUnifiedAssessments_feature: 'Feature: View Unified Assessments',
    guardianViewTimetable_feature: 'Feature: View Timetable',
    guardianViewQuizzes_feature: 'Feature: View Quizzes',
    guardianViewProjects_feature: 'Feature: View Projects',
    guardianViewLibrary_feature: 'Feature: View Library',
    guardianViewAlbum_feature: 'Feature: View Class Album',
    guardianPayFees_feature: 'Feature: Pay Monthly Fees',
    guardianSubmitComplaints_feature: 'Feature: Submit Complaints',
    guardianRequestInterview_feature: 'Feature: Request Interview',

    // Talking Cards Feature
    talkingCards: "Talking Cards",
    teacherManageTalkingCards_feature: "Feature: Manage Talking Cards",
    guardianViewTalkingCards_feature: "Feature: View Talking Cards",
    addTalkingCard: "Add a Talking Card",
    analyzeWithAI: "Analyze Image with AI",
    analyzing: "Analyzing...",
    reviewAIDetections: "Review & Edit Detections",
    editAIDetections_desc: "You can edit or delete the labels detected by the AI before saving.",
    saveCard: "Save Card",
    cardSaved: "Card saved successfully!",
    listen: "Listen",
    noTalkingCards: "No talking cards available at the moment.",
    notificationNewTalkingCard: "A new talking card has been added.",

    // Memorization Helper
    memorizationHelper: "Memorization Helper",
    teacherManageMemorization_feature: "Feature: Memorization Helper (Teacher)",
    guardianViewMemorization_feature: "Feature: Memorization Helper (Student)",
    addMemorizationItem: "Add Item to Memorize",
    memorizationItemTitle: "Item Title (e.g., Surah Al-Fatiha)",
    addByText: "Add Text",
    addByImage: "Add Image",
    addByAudio: "Record Audio",
    contentText: "Text Content",
    recordAudio: "Start Recording",
    stopRecording: "Stop Recording",
    listenToRecording: "Listen to Recording",
    saveItem: "Save Item",
    itemSaved: "Item saved successfully!",
    noMemorizationItems: "No items to memorize currently.",
    repeat: "Repeat",
    repeatCount: "Repetition Count",
    infiniteRepeat: "Infinite Loop",
    notificationNewMemorizationItem: "A new item to memorize has been added in {subject}.",
    confirmDeleteMemorizationItem: "Are you sure you want to delete this item?",
    extractingTextFromImage: "Extracting text from image...",

    // Super Admin Principal Management
    managePrincipals: "Manage Principals",
    principalManagementForStage: "Principal Management for {stageName}",
    changePassword: "Change Password",
    newPassword: "New Password",
    savePassword: "Save Password",
    principalName: "Principal Name",
    confirmDeletePrincipal: "Are you sure you want to delete principal {name}?",
    selectTeachers: 'Select Teachers',
    all: 'All',

    // Feedback Modal
    feedbackTitle: "Your Feedback Matters!",
    feedbackPrompt: "How would you rate your experience with the app?",
    feedbackPlaceholder: "Write your comments or suggestions here to improve the app...",
    send: "Send",
    later: "Later",
    feedbackThanks: "Thank you for your valuable feedback!",
    ratingRequired: "Please select a rating first.",
    saveChanges: 'Save Changes',
  },
};

type Translations = typeof translations.ar;

const LanguageContext = createContext({
  language: 'ar' as Language,
  setLanguage: (lang: Language) => {},
  t: (key: keyof Translations, replacements?: {[key: string]: string}): string => '',
});

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguageState] = useState<Language>('ar');

  useEffect(() => {
    document.documentElement.lang = language;
    document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
  }, [language]);
  
  const setLanguage = useCallback((lang: Language) => {
    if (['ar', 'fr', 'en'].includes(lang)) {
        setLanguageState(lang);
    }
  }, []);

  const t = useCallback((key: keyof Translations, replacements?: {[key: string]: string}) => {
    let translation: string = (translations[language] as any)[key] || (translations['en'] as any)[key];
    if(translation === undefined) return key as string;

    if (replacements) {
        Object.keys(replacements).forEach(rKey => {
            translation = translation.replace(`{${rKey}}`, replacements[rKey]);
        })
    }
    return translation;
  }, [language]);

  return React.createElement(LanguageContext.Provider, { value: { language, setLanguage, t } }, children);
};

export const useTranslation = () => useContext(LanguageContext);